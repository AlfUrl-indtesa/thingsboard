/**
 * Copyright Â© 2016-2024 The Thingsboard Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
@import '../../../../../../../scss/constants';

.tb-map-layout {
  display: flex;
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  flex: 1;
  &.tb-sidebar-left {
    flex-direction: row-reverse;
  }
  &.tb-sidebar-right {
    flex-direction: row;
  }
  .tb-map {
    flex: 1;
    &.leaflet-touch {
      .leaflet-bar {
        border: none;
        border-radius: 15px;
        box-shadow: 4px 4px 4px 0 rgba(0, 0, 0, 0.15);
        background: #fff;
        position: relative;
        &:before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: 15px;
          background: $tb-primary-color;  // primary color
          opacity: 0.05;
        }
        a {
          color: rgba(0, 0, 0, 0.54);
          border-bottom: none;
          position: relative;
          background: transparent;
          &:hover {
            border-bottom: none;
            color: $tb-primary-color;  // primary color
            &:before {
              content: "";
              position: absolute;
              inset: 0;
              border-radius: 50%;
              background-color: rgba(0, 105, 92, 0.10);
            }
          }
          &:first-child {
            border-top-left-radius: 50%;
            border-top-right-radius: 50%;
          }
          &:last-child {
            border-bottom-left-radius: 50%;
            border-bottom-right-radius: 50%;
          }
        }
      }
    }
    .leaflet-control {
      .tb-control-button {
        &.active, &:hover {
          > div {
            background: $tb-primary-color;  // primary color
          }
        }
        > div {
          width: 30px;
          height: 30px;
          background: rgba(0, 0, 0, 0.54);
          line-height: 30px;
          mask-repeat: no-repeat;
          mask-position: center;
          &.tb-layers {
            mask-image: url('data:image/svg+xml,<svg width="20" height="20" viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg"><path d="M9 9.5L0.75 5L9 0.5L17.25 5L9 9.5ZM9 12.5L1.18125 8.24375L2.75625 7.38125L9 10.7938L15.2438 7.38125L16.8188 8.24375L9 12.5ZM9 15.5L1.18125 11.2438L2.75625 10.3813L9 13.7938L15.2438 10.3813L16.8188 11.2438L9 15.5Z"/></svg>');
          }
          &.tb-groups {
            mask-image: url('data:image/svg+xml,<svg width="20" height="20" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M6 13.5C5.5875 13.5 5.2345 13.3533 4.941 13.0597C4.6475 12.7662 4.5005 12.413 4.5 12V3C4.5 2.5875 4.647 2.2345 4.941 1.941C5.235 1.6475 5.588 1.5005 6 1.5H15C15.4125 1.5 15.7657 1.647 16.0597 1.941C16.3538 2.235 16.5005 2.588 16.5 3V12C16.5 12.4125 16.3533 12.7657 16.0597 13.0597C15.7662 13.3538 15.413 13.5005 15 13.5H6ZM6 4.5H15V3H6V4.5ZM3 16.5C2.5875 16.5 2.2345 16.3533 1.941 16.0597C1.6475 15.7662 1.5005 15.413 1.5 15V4.5H3V15H13.5V16.5H3Z"/></svg>');
          }
        }
      }
    }
  }
  .tb-map-sidebar {
    .tb-layers, .tb-groups {
      height: 100%;
      width: 220px;
      max-width: 220px;
      display: flex;
      flex-direction: column;
      .tb-layers-title-container {
        display: flex;
        padding: 4px 4px 4px 16px;
        justify-content: space-between;
        align-items: center;
        align-self: stretch;
        .tb-layers-title {
          color: rgba(0,0,0,0.87);
          font-size: 18px;
          font-style: normal;
          font-weight: 500;
          line-height: 24px;
        }
        button.tb-button-close {
          width: 40px;
          min-width: 40px;
          height: 40px;
          padding: 8px;
          color: rgba(0, 0, 0, 0.54);
        }
      }
      .tb-layers-container {
        display: flex;
        flex: 1;
        padding: 4px 16px 16px 16px;
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        align-self: stretch;
        overflow: auto;
        .tb-layer-card {
          position: relative;
          height: 64px;
          min-height: 64px;
          align-self: stretch;
          .tb-layer-map {
            position: absolute;
            inset: 2px;
            border-radius: 2px;
            z-index: 0;
            .leaflet-control-attribution {
              display: none;
            }
          }
          input.tb-layer-button {
            position: absolute;
            left: 0;
            bottom: 0;
            clip: rect(0, 0, 0, 0);
            pointer-events: none;
            &:checked+label.tb-layer-label {
              border: 3px solid $tb-primary-color;
              box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.30), 0 2px 6px 2px rgba(0, 0, 0, 0.15);
              margin: 0;
            }
          }
          label.tb-layer-label {
            position: absolute;
            inset: 0;
            cursor: pointer;
            border-radius: 2px;
            border: 1px solid rgba(0, 0, 0, 0.12);
            margin: 2px;
            &:hover {
              border: 3px solid $tb-primary-color;
              box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.30), 0 2px 6px 2px rgba(0, 0, 0, 0.15);
              margin: 0;
            }
            > span {
              position: absolute;
              left: 0;
              bottom: 0;
              padding: 0 3px;
              border-radius: 0 2px 0 0;
              background: rgba(0, 0, 0, 0.56);
              color: #fff;
              font-size: 14px;
              font-style: normal;
              font-weight: 500;
              line-height: 20px;
              user-select: none;
            }
          }
        }
        .tb-group-checkbox {
          width: 100%;
          display: flex;
          align-items: center;
          gap: 0;
          cursor: pointer;
          .tb-group-button {
            width: 20px;
            height: 20px;
            min-width: 20px;
            min-height: 20px;
            margin: 4px;
            cursor: pointer;
            accent-color: var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));
          }
          .tb-group-label {
            padding-left: 12px;
            font-size: 14px;
            font-weight: 400;
            color: rgba(0, 0, 0, 0.76);
            user-select: none;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
          }
        }
      }
    }
  }
}
